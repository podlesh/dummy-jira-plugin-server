<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
        <param name="plugin-icon">images/pluginIcon.png</param>
        <param name="plugin-logo">images/pluginLogo.png</param>
    </plugin-info>
    <!-- add our i18n resource -->
    <resource type="i18n" name="i18n" location="rp"/>
    <!-- add our web resources -->
    <web-resource key="rp-resources" name="Roadmap Planner Web Resources">
        <dependency>com.atlassian.auiplugin:ajs</dependency>
        <dependency>com.atlassian.auiplugin:aui-select</dependency>
        <transformation extension="soy">
            <transformer key="soyTransformer">
                <functions>com.atlassian.confluence.plugins.soy:soy-core-functions</functions>
            </transformer>
        </transformation>
        <resource type="download" name="rp.css" location="/css/rp.css"/>
        <resource type="download" name="rp.js" location="/js/rp.js"/>
        <resource type="download" name="images/" location="/images"/>
        <resource type="soy" location="/soy/dashboard-item.soy" name="Dashboard.Item.Templates.Static"/>
        <resource type="download" name="Templates.soy.js" location="/soy/dashboard-item.soy"/>
        <context>jira.general</context>
        <!--<context>atl.dashboard</context>-->
    </web-resource>
    <gadget name="gadget1" i18n-name-key="gadget-1.name" key="gadget-1" location="gadgets/gadget-1/gadget.xml">
        <description key="gadget-1.description">The gadget1 Plugin</description>
    </gadget>
    <dashboard-item name="Velocity Oracle" key="di-1" i18n-name-key="di-1.name" configurable="true">
        <description key="di-1.description">The Roadmap Planner plugin</description>
        <definition>
            <title key="di-1.title">The Roadmap Planner (title)</title>
            <categories>
                <category>Jira</category>
            </categories>
            <author>
                <name>Kamil Podlešák</name>
            </author>
            <thumbnail location="/download/resources/${atlassian.plugin.key}:rp-resources/images/pluginLogo.png"/>
        </definition>
        <resource name="view" type="soy" location=":rp-resources/Dashboard.Item.Templates.Static"/>
        <context-provider class="com.podlesh.atlassian.DashboardItemContextProvider"/>

        <amd-module>DashboardItem</amd-module>

    </dashboard-item>
    <rest name="Roadmap Plugin rest API" key="rp-rest-resource" path="/roadmap-plugin" version="1.0">
        <description>Roadmap Plugin</description>
    </rest>
</atlassian-plugin>
